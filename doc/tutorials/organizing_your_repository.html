<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Organizing your repository &mdash; pyqi: expose your interface</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="pyqi: expose your interface" href="../index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>pyqi: expose your interface</span></a></h1>
        <h2 class="heading"><span>Organizing your repository</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="organizing-your-repository">
<span id="id1"></span><h1>Organizing your repository<a class="headerlink" href="#organizing-your-repository" title="Permalink to this headline">¶</a></h1>
<p>This document covers suggestions for organizing your repository to align with how pyqi and projects that use pyqi are organized. Following these guidelines is not a requirement, but may simplify using pyqi in your project. Version 1.1.3 of the <a class="reference external" href="http://www.biom-format.org">biom-format</a> project was the first project to use pyqi for its commands and interfaces, so the structure of that repository is used as an example here.</p>
<div class="section" id="structure-of-the-biom-format-project">
<h2>Structure of the biom-format project<a class="headerlink" href="#structure-of-the-biom-format-project" title="Permalink to this headline">¶</a></h2>
<p>This directory tree (created with the unix <tt class="docutils literal"><span class="pre">tree</span></tt> command) illustrates the structure of the biom-format repository (some files that are not relevant to this discussion have been omitted to keep this as simple as possible). Annotations have been added following <tt class="docutils literal"><span class="pre">##</span></tt> to reference specific directories.</p>
<div class="highlight-python"><pre>biom-format/
├── ChangeLog
├── COPYING
├── doc
├── examples
├── images
├── INSTALL
├── python-code
│   ├── biom ## Library code directory
│   │   ├── biomdb.py
│   │   ├── commands ## derived Command classes
│   │   │   ├── __init__.py
│   │   │   ├── installation_informer.py
│   │   │   ├── metadata_adder.py
│   │   │   ├── table_subsetter.py
│   │   │   ├── table_summarizer.py
│   │   │   └── table_validator.py
│   │   ├── csmat.py
│   │   ├── dbdata.py
│   │   ├── exception.py
│   │   ├── __init__.py
│   │   ├── interfaces ## per-interface-type directories
│   │   │   ├── __init__.py
│   │   │   └── optparse ## derived OptparseInterface classes
│   │   │       ├── config
│   │   │       │   ├── add_metadata.py
│   │   │       │   ├── __init__.py
│   │   │       │   ├── show_install_info.py
│   │   │       │   ├── subset_table.py
│   │   │       │   ├── summarize_table.py
│   │   │       │   └── validate_table.py
│   │   │       ├── __init__.py
│   │   │       ├── input_handler.py ## general purpose OptparseInterface input handler functions
│   │   │       └── output_handler.py ## general purpose OptparseInterface output handler functions
│   │   ├── parse.py
│   │   ├── sparsedict.py
│   │   ├── sparsemat.py
│   │   ├── table.py
│   │   ├── unit_test.py
│   │   └── util.py
│   ├── support-code
│   └── tests ## Test code directory
│       ├── bench
│       ├── __init__.py
│       ├── test_biomdb.py
│       ├── test_commands # unit tests of the derived Command classes
│       │   ├── __init__.py
│       │   ├── test_installation_informer.py
│       │   ├── test_metadata_adder.py
│       │   ├── test_table_subsetter.py
│       │   ├── test_table_summarizer.py
│       │   └── test_table_validator.py
│       ├── test_csmat.py
│       ├── test_dbdata.py
│       ├── test_interfaces # unit tests of input and output handlers
│       │   ├── __init__.py
│       │   ├── test_optparse
│   │   │       ├── __init__.py
│   │   │       ├── test_input_handler.py ## tests of OptparseInterface input handler functions
│   │   │       └── test_output_handler.py ## tests of OptparseInterface output handler functions
│       ├── test_parse.py
│       ├── test_sparsedict.py
│       ├── test_sparsemat.py
│       ├── test_table.py
│       ├── test_unit_test.py
│       └── test_util.py
├── R-code
├── README.md
├── scripts
│   └── biom ## biom command driver
├── setup.py
└── support_files</pre>
</div>
</div>
<div class="section" id="discussion-of-the-biom-format-directory-structure">
<h2>Discussion of the biom-format directory structure<a class="headerlink" href="#discussion-of-the-biom-format-directory-structure" title="Permalink to this headline">¶</a></h2>
<p>Under the <tt class="docutils literal"><span class="pre">biom</span></tt> <em>library code directory</em>, there are two directories that house pyqi-related code. The first is <tt class="docutils literal"><span class="pre">commands</span></tt>, which contains derivations of the <tt class="docutils literal"><span class="pre">Command</span></tt> class (see <a class="reference internal" href="defining_new_commands.html#defining-new-commands"><em>Defining new commands</em></a> for discussion of these files). All of the <tt class="docutils literal"><span class="pre">biom-format</span></tt> commands are therefore defined in this directory. The second is <tt class="docutils literal"><span class="pre">interfaces</span></tt>, which contains all of the derivations of the pyqi <tt class="docutils literal"><span class="pre">Interface</span></tt> class, and which are nested based on interface type. Currently <tt class="docutils literal"><span class="pre">biom-format</span></tt> only implements <tt class="docutils literal"><span class="pre">OptparseInterface</span></tt> classes, so there is only an <tt class="docutils literal"><span class="pre">optparse</span></tt> directory, but by nesting these on an per-interface-type basis we avoid name conflicts if multiple interfaces types were defined.</p>
<p>Under the <tt class="docutils literal"><span class="pre">biom/interfaces/optparse</span></tt> directory, there is a <tt class="docutils literal"><span class="pre">config</span></tt> directory which contains all of the config files (see <a class="reference internal" href="defining_new_interfaces.html#defining-new-interfaces"><em>Defining new interfaces</em></a> for discussion of these files). There are also top-level <tt class="docutils literal"><span class="pre">input_handler.py</span></tt> and <tt class="docutils literal"><span class="pre">output_handler.py</span></tt> files. These files contain general purpose input and output handlers that may be used in multiple <tt class="docutils literal"><span class="pre">OptparseInterfaces</span></tt>. Since input and output handlers are interface specific, it makes sense for these files to be contained under the <tt class="docutils literal"><span class="pre">biom/interfaces/optparse</span></tt> directory.</p>
<p>Under the <tt class="docutils literal"><span class="pre">tests</span></tt> directory there are subdirectories for <tt class="docutils literal"><span class="pre">test_commands</span></tt> and <tt class="docutils literal"><span class="pre">test_interfaces</span></tt>. The <tt class="docutils literal"><span class="pre">test_commands</span></tt> directory should contain a file corresponding to each file in the <tt class="docutils literal"><span class="pre">biom/commands</span></tt> directory, and should provide extensive unit testing of each of your commands. The <tt class="docutils literal"><span class="pre">test_interfaces</span></tt> directory is more minimal as typically there is not any functionality in the interfaces (the files are just providing configuration details). The exception is the input and output handlers, so there are test files corresponding to the files where those are defined. Note that the nesting of all test files matches the nesting in the library code directory.</p>
<p>Finally, under the <tt class="docutils literal"><span class="pre">scripts</span></tt> directory there is a single executable, <tt class="docutils literal"><span class="pre">biom</span></tt>, which is the <tt class="docutils literal"><span class="pre">OptparseInterface</span></tt> command driver. This is a simple shell script that allows users to access the <tt class="docutils literal"><span class="pre">OptparseInterfaces</span></tt> defined in the <tt class="docutils literal"><span class="pre">biom-format</span></tt> project. Defining this script for your project is covered in <a class="reference internal" href="defining_your_command_driver.html#defining-your-command-driver"><em>Defining your command driver</em></a>.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2013, The BiPy Development Team.
      Last updated on Dec 04, 2013.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>